{% extends '../layout/layout.html' %}

{% block body %}

<div class="box">
	<div class="box-header">
		<h3 class="box-title"></h3>
	</div>
	<div class="box-body">

		<div class="col-md-6 col-md-offset-3">
			<i-form ref="formValidate" :model="formValidate" :rules="ruleValidate" :label-width="120">
				<Form-item label="推荐位KEY">
					<span>[[item.key]]</span>
				</Form-item>
				<Form-item label="推荐位名称">
					<span>[[item.name]]</span>
				</Form-item>
				<Form-item label="备注" prop="description">
					<span>[[item.description]]</span>
				</Form-item>
				<Form-item label="标题" prop="title">
					<i-input v-model="formValidate.title" type="text" placeholder="(不超过30个字)" :maxlength="30"></i-input>
				</Form-item>
				<Form-item label="链接" prop="url">
					<i-input v-model="formValidate.url" type="text" :maxlength="100"></i-input>
				</Form-item>
				<Form-item label="开始时间">
					<Date-picker type="datetime" format="yyyy-MM-dd HH:mm" v-model="formValidate.startTime"></Date-picker>
				</Form-item>
				<Form-item label="结束时间">
					<Date-picker type="datetime" format="yyyy-MM-dd HH:mm" v-model="formValidate.endTime"></Date-picker>
				</Form-item>
				{% for li in item.custemItems %}
				{% if li.type === 'String' %}
				<Form-item label="[[li.name]]">
					<i-input v-model="formValidate.custemItems.[[li.key]]" type="text" placeholder="[[li.name]] (不超过60个字)" :maxlength="60"></i-input>
				</Form-item>
				{% endif %}
				{% if li.type === 'Boolean' %}
				<Form-item label="[[li.name]]">
					<Checkbox v-model="formValidate.custemItems.[[li.key]]"></Checkbox>
				</Form-item>
				{% endif %}
				{% if li.type === 'Date' %}
				<Form-item label="[[li.name]]">
					<Date-picker type="datetime" format="yyyy-MM-dd HH:mm" placeholder="[[li.name]]" v-model="formValidate.custemItems.[[li.key]]"></Date-picker>
				</Form-item>
				{% endif %}
				{% endfor %}
				<Form-item>
					<i-button type="primary" @click="handleSubmit('formValidate')">提交</i-button>
					<i-button type="ghost" style="margin-left: 8px" @click="handleReset('formValidate')">重置</i-button>
				</Form-item>
			</i-form>
		</div>

	</div>
</div>


{% endblock %}

{% block css %}
{% endblock %}

{% block js %}
<script>
var pci = {
	_$_: 0
	{% for li in item.custemItems %},'[[li.key]]': 1{% endfor %}
}
var ITEM = {
	key:  '[[item.key]]',
	name: '[[item.name]]',
	rpId:  [[item.id]],
	description: '[[item.description]]'
},
rpcInfo = {
	id:        '[[rpcInfo.id]]',
	title:     '[[rpcInfo.title]]',
	imageUrl:  '[[rpcInfo.imageUrl]]',
	url:       '[[rpcInfo.url]]',
	startTime: '[[rpcInfo.startTime]]',
	endTime:   '[[rpcInfo.endTime]]',
	custemItems: {% autoescape false %}'[[rpcInfo.custemItems]]'{% endautoescape %}
}
if (rpcInfo.rpId) rpcInfo.rpId = rpcInfo.rpId*1
if (rpcInfo.custemItems) {
	var no = {}
	rpcInfo.custemItems = JSON.parse(rpcInfo.custemItems)
	for (var p in rpcInfo.custemItems) {
		if (pci[p]) no[p] = rpcInfo.custemItems[p]
	}
	rpcInfo.custemItems = no
}
</script>
<script src="/js/util/iview/iview.min.js"></script>
<script src="/js/txtrp/itemAdd.js"></script>
{% endblock %}